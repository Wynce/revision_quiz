<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚀 Gen Alpha Revision Fun! 📚</title>
    <!-- Google Fonts: Poppins for a playful yet readable look -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- Tailwind CSS CDN for modern, responsive styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles to override or extend Tailwind for specific effects */
        body {
            font-family: 'Poppins', sans-serif;
            /* Vibrant background gradient */
            background: linear-gradient(135deg, #8B5CF6 0%, #EC4899 100%); /* Purple to Pink */
            min-height: 100vh;
            padding: 1rem;
        }

        /* Custom animation for header elements */
        .header-bg-animate {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* Shake animation for incorrect answers */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .animate-shake {
            animation: shake 0.5s ease-in-out;
        }

        /* Pop-in animation for modals */
        @keyframes popIn {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        .animate-popIn {
            animation: popIn 0.3s ease-out forwards;
        }

        /* Custom scrollbar for text area */
        textarea::-webkit-scrollbar {
            width: 8px;
        }
        textarea::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        textarea::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        textarea::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="flex items-center justify-center">
    <div class="container max-w-3xl w-full mx-auto bg-white bg-opacity-95 rounded-3xl shadow-2xl backdrop-blur-md overflow-hidden my-8">
        <!-- Header Section -->
        <div class="header bg-gradient-to-r from-blue-600 to-green-500 text-white p-6 md:p-8 text-center relative overflow-hidden rounded-t-3xl">
            <!-- Animated background elements -->
            <div class="absolute inset-0 header-bg-animate">
                <svg class="w-full h-full opacity-10" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="20" cy="20" r="3" fill="rgba(255,255,255,0.2)"/>
                    <circle cx="80" cy="80" r="4" fill="rgba(255,255,255,0.2)"/>
                    <circle cx="40" cy="60" r="2" fill="rgba(255,255,255,0.2)"/>
                    <circle cx="10" cy="90" r="2.5" fill="rgba(255,255,255,0.2)"/>
                    <circle cx="90" cy="10" r="3.5" fill="rgba(255,255,255,0.2)"/>
                </svg>
            </div>
            <!-- Logo added here, with adjusted size for less height -->
            <img src="AXCEL LOGO HORIZONTAL.jpg" alt="AXCEL LOGO" class="mx-auto mb-2 w-24 md:w-32 h-auto relative z-10 drop-shadow-md">
            <h1 class="text-4xl md:text-5xl font-extrabold mb-2 drop-shadow-lg relative z-10">
                Revision Adventure! 🚀
            </h1>
            <p class="text-lg md:text-xl opacity-90 relative z-10">
                Turn your notes into a super fun quiz!
            </p>
        </div>

        <!-- Progress and Stats Section -->
        <div class="progress-section p-6 bg-gray-50 border-b border-gray-100">
            <div class="progress-bar w-full h-5 bg-gray-200 rounded-full overflow-hidden mb-4 shadow-inner">
                <div class="progress-fill h-full bg-gradient-to-r from-green-400 to-emerald-500 transition-all duration-500 ease-out rounded-full" id="progressFill" style="width: 0%;"></div>
            </div>
            <div class="stats flex flex-wrap justify-around items-center gap-4 text-sm md:text-base">
                <div class="stat-item flex items-center gap-2 px-4 py-2 bg-white rounded-full shadow-md font-semibold text-gray-700">
                    <span>📊</span>
                    <span id="progressText">0% Complete</span>
                </div>
                <div class="stat-item flex items-center gap-2 px-4 py-2 bg-white rounded-full shadow-md font-semibold text-gray-700">
                    <span>✅</span>
                    <span id="correctCount">0 Correct</span>
                </div>
                <div class="stat-item flex items-center gap-2 px-4 py-2 bg-white rounded-full shadow-md font-semibold text-gray-700">
                    <span>❌</span>
                    <span id="incorrectCount">0 Incorrect</span>
                </div>
                <div class="stat-item flex items-center gap-2 px-4 py-2 bg-white rounded-full shadow-md font-semibold text-gray-700">
                    <span>🎯</span>
                    <span id="totalBlanks">0 Total</span>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="content p-6">
            <!-- Notes Input Section -->
            <div class="notes-input mb-6" id="notesInput">
                <label for="notesTextarea" class="block text-gray-700 text-lg font-semibold mb-3">
                    📝 Paste your awesome revision notes here:
                </label>
                <textarea id="notesTextarea"
                          class="w-full h-40 p-4 border-2 border-blue-300 rounded-xl text-base resize-y focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-200/50 transition-all duration-300 shadow-inner"
                          placeholder="Example: The [force] required to accelerate an object is equal to its [mass] times its [acceleration]. This is known as [Newton's] second law of motion.

✨ Pro Tip: Put words you want to turn into blanks inside [square brackets]! You'll see the first letter and underscores for the rest.

Works for ANY subject - Science, History, Languages, and more! Let's learn!"></textarea>
            </div>

            <!-- Control Buttons -->
            <div class="controls flex flex-wrap justify-center gap-4 mb-8">
                <button class="btn btn-primary" onclick="generateRevision()">
                    🚀 Generate My Quiz!
                </button>
                <button class="btn btn-secondary" id="submitBtn" onclick="submitQuiz()" style="display: none;">
                    ✅ Check My Answers!
                </button>
                <button class="btn btn-secondary" id="revealBtn" onclick="revealAnswers()" style="display: none;">
                    👁️ Show Me The Answers!
                </button>
                <button class="btn btn-secondary" id="retestBtn" onclick="retestQuestions()" style="display: none;">
                    🔄 Try Again!
                </button>
                <button class="btn btn-tertiary" onclick="resetRevision()">
                    🗑️ Start Over
                </button>
            </div>

            <!-- Revision Content Display Area -->
            <div id="revisionContent" class="revision-content bg-white rounded-2xl p-6 shadow-xl text-lg leading-relaxed" style="display: none;">
                <div class="placeholder-text text-gray-500 italic text-center py-8">
                    Your interactive revision notes will appear here! ✨ Get ready to fill in the blanks!
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Modal Container -->
    <div id="customModalContainer" class="fixed inset-0 bg-black bg-opacity-60 z-[999] hidden flex items-center justify-center">
        <!-- Modal content will be injected here -->
    </div>

    <script>
        let blanksData = [];
        let totalBlanks = 0;
        let correctAnswers = 0;
        let incorrectAnswers = 0;
        let quizSubmitted = false;

        // --- Utility Functions for Custom Modals ---
        function showCustomModal(title, message, buttonsHtml, onModalClose = () => {}) {
            const modalContainer = document.getElementById('customModalContainer');
            modalContainer.innerHTML = `
                <div class="bg-white p-8 rounded-3xl shadow-2xl text-center max-w-sm w-11/12 animate-popIn">
                    <h2 class="text-3xl font-extrabold mb-4 text-purple-600">${title}</h2>
                    <p class="text-gray-700 text-lg mb-6">${message}</p>
                    <div class="flex justify-center gap-4">
                        ${buttonsHtml}
                    </div>
                </div>
            `;
            modalContainer.classList.remove('hidden');
            modalContainer.onclick = (e) => {
                if (e.target === modalContainer) {
                    closeCustomModal();
                    onModalClose();
                }
            };
        }

        function closeCustomModal() {
            const modalContainer = document.getElementById('customModalContainer');
            modalContainer.classList.add('hidden');
            modalContainer.innerHTML = ''; // Clear content
        }

        // --- Main Quiz Logic Functions ---

        function generateRevision() {
            const notesText = document.getElementById('notesTextarea').value.trim();

            if (!notesText) {
                showCustomModal(
                    'Oops!',
                    'Please type or paste some notes first to create your quiz! 📝',
                    `<button class="btn btn-primary" onclick="closeCustomModal()">Got It!</button>`
                );
                return;
            }

            blanksData = [];
            totalBlanks = 0;
            correctAnswers = 0;
            incorrectAnswers = 0;
            quizSubmitted = false;

            // Process the text to find words in brackets and replace them with interactive inputs
            let processedText = notesText.replace(/\[([^\]]+)\]/g, (match, word) => {
                const blankId = `blank_${totalBlanks}`;
                const firstLetter = word.charAt(0);
                // Display only the first letter and underscores for the rest
                const underscores = '_'.repeat(word.length - 1);
                const placeholder = firstLetter + underscores;

                blanksData.push({
                    id: blankId,
                    answer: word.toLowerCase(),
                    placeholder: placeholder
                });

                totalBlanks++;

                return `<span class="blank-container inline-flex items-center gap-2 mx-1 vertical-align-baseline">
                    <input type="text" class="blank-input px-3 py-2 border-2 border-blue-300 rounded-lg text-base font-medium transition-all duration-300 min-w-[100px] text-center focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200/50"
                           id="${blankId}"
                           placeholder="${placeholder}"
                           autocomplete="off">
                    <div class="status-indicator w-7 h-7 rounded-full flex items-center justify-center font-extrabold text-sm transition-all duration-300 bg-gray-200 text-gray-600"
                         id="${blankId}_status">?</div>
                </span>`;
            });

            // Hide the notes input section and show the quiz
            document.getElementById('notesInput').style.display = 'none';
            document.getElementById('revisionContent').innerHTML = processedText;
            document.getElementById('revisionContent').style.display = 'block';

            // Update button visibility
            document.getElementById('submitBtn').style.display = 'inline-flex';
            document.getElementById('revealBtn').style.display = 'none';
            document.getElementById('retestBtn').style.display = 'none';

            updateStats(); // Initialize stats
        }

        function submitQuiz() {
            if (totalBlanks === 0) {
                showCustomModal(
                    'No Quiz Yet!',
                    'Please generate your revision quiz first! 🚀',
                    `<button class="btn btn-primary" onclick="closeCustomModal()">Okay!</button>`
                );
                return;
            }

            quizSubmitted = true;
            let correctCount = 0;
            let attemptedCount = 0;

            blanksData.forEach(blank => {
                const input = document.getElementById(blank.id);
                const statusIndicator = document.getElementById(blank.id + '_status');
                const userAnswer = input.value.toLowerCase().trim();

                input.disabled = true; // Disable input after submission

                if (userAnswer) {
                    attemptedCount++;
                    if (userAnswer === blank.answer) {
                        correctCount++;
                        input.classList.add('correct', '!border-green-500', '!bg-green-50', '!text-green-800');
                        statusIndicator.classList.add('correct', 'bg-green-500', 'text-white', 'transform', 'scale-110');
                        statusIndicator.textContent = '✓';
                    } else {
                        input.classList.add('incorrect', '!border-red-500', '!bg-red-50', '!text-red-800', 'animate-shake');
                        statusIndicator.classList.add('incorrect', 'bg-red-500', 'text-white');
                        statusIndicator.textContent = '✗';
                    }
                } else {
                    // Not attempted
                    input.classList.add('!border-gray-400', '!bg-gray-100', '!text-gray-600');
                    statusIndicator.classList.add('bg-gray-300', 'text-gray-700');
                    statusIndicator.textContent = '...';
                }
            });

            const score = totalBlanks > 0 ? Math.round((correctCount / totalBlanks) * 100) : 0;
            showScoreResults(correctCount, totalBlanks, score, attempted);

            // Update button visibility
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('revealBtn').style.display = 'inline-flex';
            document.getElementById('retestBtn').style.display = 'inline-flex';

            updateStats(); // Update stats based on submission results
        }

        function showScoreResults(correct, total, score, attempted) {
            let message = '';
            let emoji = '';

            if (score === 100 && total > 0) {
                message = 'You\'re a Quiz Whiz!';
                emoji = '�';
                showCelebration(); // Trigger special celebration for perfect score
            } else if (score >= 80) {
                message = 'Awesome Job!';
                emoji = '🎉';
            } else if (score >= 50) {
                message = 'Great Effort!';
                emoji = '👍';
            } else {
                message = 'Keep Practicing!';
                emoji = '💪';
            }

            showCustomModal(
                `${emoji} Quiz Submitted! ${emoji}`,
                `<h3>${message}</h3>
                <div class="my-4 text-xl">
                    <p><strong>Your Score: ${correct}/${total}</strong></p>
                    <p><strong>Percentage: ${score}%</strong></p>
                    <p>Questions Attempted: ${attempted}/${total}</p>
                </div>
                <p>Ready to see which answers were correct?</p>`,
                `<button class="btn btn-primary" onclick="closeCustomModal()">Continue Learning! 📚</button>`
            );
        }

        function revealAnswers() {
            if (totalBlanks === 0) {
                showCustomModal(
                    'No Quiz Yet!',
                    'Please generate your revision quiz first! 🚀',
                    `<button class="btn btn-primary" onclick="closeCustomModal()">Okay!</button>`
                );
                return;
            }

            if (!quizSubmitted) {
                showCustomModal(
                    'Hold On!',
                    'Please submit your quiz first to see your score and then reveal answers! 📝',
                    `<button class="btn btn-primary" onclick="closeCustomModal()">Got It!</button>`
                );
                return;
            }

            blanksData.forEach(blank => {
                const input = document.getElementById(blank.id);
                const statusIndicator = document.getElementById(blank.id + '_status');
                const userAnswer = input.value.toLowerCase().trim();

                input.disabled = true; // Keep disabled

                if (userAnswer === blank.answer) {
                    // Already correct, keep green
                    input.classList.remove('incorrect', 'animate-shake');
                    input.classList.add('correct', '!border-green-500', '!bg-green-50', '!text-green-800');
                    statusIndicator.classList.remove('incorrect');
                    statusIndicator.classList.add('correct', 'bg-green-500', 'text-white');
                    statusIndicator.textContent = '✓';
                } else {
                    // Incorrect or empty, show correct answer
                    input.value = blank.answer; // Overwrite with correct answer
                    input.classList.remove('correct', 'incorrect', 'animate-shake');
                    input.classList.add('show-answer', '!border-yellow-500', '!bg-yellow-50', '!text-yellow-800', '!font-bold');
                    statusIndicator.classList.remove('correct', 'incorrect', 'empty');
                    statusIndicator.classList.add('show-answer', 'bg-yellow-500', 'text-gray-800');
                    statusIndicator.textContent = 'A'; // 'A' for Answer
                }
            });

            updateStats(); // Update stats (though counts won't change after reveal)

            const correctCount = getCurrentCorrectCount(); // This will still count based on initial correct answers
            const score = totalBlanks > 0 ? Math.round((correctCount / totalBlanks) * 100) : 0;

            showCustomModal(
                '📋 Detailed Results!',
                `<div class="my-4 text-xl">
                    <p><strong>Final Score: ${correctCount}/${totalBlanks} (${score}%)</strong></p>
                    <br>
                    <div class="text-left text-base">
                        <p><span class="inline-block w-4 h-4 rounded-full bg-green-500 mr-2"></span> <strong>Green:</strong> Your correct answers</p>
                        <p><span class="inline-block w-4 h-4 rounded-full bg-red-500 mr-2"></span> <strong>Red:</strong> Your incorrect answers</p>
                        <p><span class="inline-block w-4 h-4 rounded-full bg-yellow-500 mr-2"></span> <strong>Yellow:</strong> Correct answers revealed</p>
                    </div>
                </div>
                <p>Review the answers above and try again when ready!</p>`,
                `<button class="btn btn-primary" onclick="closeCustomModal()">Got It! 🎉</button>`
            );
        }

        function retestQuestions() {
            if (totalBlanks === 0) {
                showCustomModal(
                    'No Quiz Yet!',
                    'Please generate your revision quiz first! 🚀',
                    `<button class="btn btn-primary" onclick="closeCustomModal()">Okay!</button>`
                );
                return;
            }

            showCustomModal(
                'Ready for a New Round?',
                'Do you want to clear your answers and try these questions again? 🔄',
                `<button class="btn btn-primary" onclick="confirmRetest()">Yes, Let's Go!</button>
                 <button class="btn btn-tertiary" onclick="closeCustomModal()">Not Yet</button>`
            );
        }

        function confirmRetest() {
            closeCustomModal(); // Close the confirmation modal

            // Clear all input fields and reset their states
            blanksData.forEach(blank => {
                const input = document.getElementById(blank.id);
                const statusIndicator = document.getElementById(blank.id + '_status');

                input.value = '';
                input.className = 'blank-input px-3 py-2 border-2 border-blue-300 rounded-lg text-base font-medium transition-all duration-300 min-w-[100px] text-center focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200/50';
                input.disabled = false; // Enable input
                statusIndicator.className = 'status-indicator w-7 h-7 rounded-full flex items-center justify-center font-extrabold text-sm transition-all duration-300 bg-gray-200 text-gray-600';
                statusIndicator.textContent = '?';
            });

            // Reset quiz state
            correctAnswers = 0;
            incorrectAnswers = 0;
            quizSubmitted = false;

            // Reset button visibility - back to fresh quiz state
            document.getElementById('submitBtn').style.display = 'inline-flex';
            document.getElementById('revealBtn').style.display = 'none';
            document.getElementById('retestBtn').style.display = 'none';

            updateStats(); // Reset stats display

            showCustomModal(
                'Awesome!',
                'Ready for another attempt! You got this! 🎯',
                `<button class="btn btn-primary" onclick="closeCustomModal()">Let's Do It!</button>`
            );
        }

        function getCurrentCorrectCount() {
            let correct = 0;
            blanksData.forEach(blank => {
                const input = document.getElementById(blank.id);
                const userAnswer = input.value.toLowerCase().trim();
                // Only count as correct if it matches exactly and wasn't revealed (i.e., user entered it)
                if (userAnswer === blank.answer && !input.classList.contains('show-answer')) {
                    correct++;
                }
            });
            return correct;
        }

        function getCurrentIncorrectCount() {
            let incorrect = 0;
            blanksData.forEach(blank => {
                const input = document.getElementById(blank.id);
                const userAnswer = input.value.toLowerCase().trim();
                if (userAnswer && userAnswer !== blank.answer && !input.classList.contains('show-answer')) {
                    incorrect++;
                }
            });
            return incorrect;
        }

        function updateStats() {
            correctAnswers = getCurrentCorrectCount();
            incorrectAnswers = getCurrentIncorrectCount();

            const progress = totalBlanks > 0 ? Math.round((correctAnswers / totalBlanks) * 100) : 0;

            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = progress + '% Complete';
            document.getElementById('correctCount').textContent = correctAnswers + ' Correct';
            document.getElementById('incorrectCount').textContent = incorrectAnswers + ' Incorrect';
            document.getElementById('totalBlanks').textContent = totalBlanks + ' Total';
        }

        function resetRevision() {
            if (totalBlanks === 0 && !document.getElementById('notesTextarea').value.trim()) {
                showCustomModal(
                    'Nothing to Reset!',
                    'Your notes area is already empty. Start fresh! ✨',
                    `<button class="btn btn-primary" onclick="closeCustomModal()">Okay!</button>`
                );
                return;
            }

            showCustomModal(
                'Clear Everything?',
                'Are you sure you want to reset all content and answers? This will clear your notes too! 🗑️',
                `<button class="btn btn-secondary" onclick="confirmReset()">Yes, Clear All!</button>
                 <button class="btn btn-tertiary" onclick="closeCustomModal()">No, Keep It</button>`
            );
        }

        function confirmReset() {
            closeCustomModal(); // Close the confirmation modal

            // Clear the textarea
            document.getElementById('notesTextarea').value = '';

            // Show the notes input section again
            document.getElementById('notesInput').style.display = 'block';

            // Hide the revision content
            document.getElementById('revisionContent').style.display = 'none';

            // Reset all variables
            blanksData = [];
            totalBlanks = 0;
            correctAnswers = 0;
            incorrectAnswers = 0;
            quizSubmitted = false;

            // Reset button visibility
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('revealBtn').style.display = 'none';
            document.getElementById('retestBtn').style.display = 'none';

            updateStats(); // Reset stats display

            showCustomModal(
                'All Cleared!',
                'Everything is reset. Ready for a new adventure! 🌟',
                `<button class="btn btn-primary" onclick="closeCustomModal()">Let's Go!</button>`
            );
        }

        // Special celebration for perfect score
        function showCelebration() {
            const overlay = document.createElement('div');
            overlay.className = 'fixed inset-0 bg-black bg-opacity-60 z-[999] flex items-center justify-center';

            const celebration = document.createElement('div');
            celebration.className = 'bg-gradient-to-br from-lime-400 to-green-500 text-white p-8 rounded-3xl shadow-2xl text-center z-[1000] animate-popIn max-w-sm w-11/12';
            celebration.innerHTML = `
                <h2 class="text-4xl font-extrabold mb-4">🎉 Perfect Score! 🎉</h2>
                <p class="text-xl mb-6">Outstanding! You got everything correct!</p>
                <p class="text-2xl font-bold mb-8"><strong>Perfect Score: ${totalBlanks}/${totalBlanks}</strong></p>
                <button class="btn btn-primary" onclick="closeCelebration()">Amazing Work! 🌟</button>
            `;

            document.body.appendChild(overlay);
            document.body.appendChild(celebration);

            // Auto-close after 5 seconds
            setTimeout(() => {
                closeCelebration();
            }, 5000);
        }

        function closeCelebration() {
            const overlay = document.querySelector('.fixed.inset-0.bg-black.bg-opacity-60.z-\\[999\\]');
            const celebration = document.querySelector('.bg-gradient-to-br.from-lime-400.to-green-500.text-white');
            if (overlay) overlay.remove();
            if (celebration) celebration.remove();
        }

        // Sample notes for demonstration (pre-filled for easy testing)
        document.getElementById('notesTextarea').value = `The [force] required to accelerate an object is equal to its [mass] times its [acceleration]. This is known as [Newton's] second law of motion.

[Energy] cannot be created or destroyed, only transferred from one form to another. This is the law of conservation of [energy].

The [speed] of light in a vacuum is approximately [300000000] meters per second. Light travels in straight lines and can be [reflected] by mirrors.

[Electricity] is the flow of [electrons] through a conductor. The unit of electrical [current] is the [ampere].

[Temperature] is a measure of the average [kinetic] energy of particles in a substance. Heat always flows from [hot] objects to [cold] objects.`;
    </script>
</body>
</html>
�